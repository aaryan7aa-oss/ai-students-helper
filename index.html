<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Student Helper</title>
<style>
  body { font-family: Arial, sans-serif; background: linear-gradient(135deg,#4e54c8,#8f94fb); color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; }
  .container { background: rgba(255,255,255,0.1); border-radius: 20px; padding: 20px; width: 90%; max-width: 600px; }
  input, button { width: 100%; padding: 12px; margin-top: 10px; border-radius: 10px; border: none; font-size: 1em; }
  input[type=text] { background: rgba(255,255,255,0.2); color: #fff; }
  button { background: #ff9800; color: white; cursor: pointer; }
  button:hover { background: #ff5722; }
  .response { margin-top: 15px; background: rgba(255,255,255,0.15); padding: 15px; border-radius: 10px; min-height: 100px; white-space: pre-wrap; }
  .image-preview { margin-top: 10px; text-align: center; }
  img { max-width: 100%; border-radius: 10px; }
</style>
</head>
<body>
<h1>ðŸŽ“ AI Student Helper</h1>
<div class="container">
  <input type="text" id="question" placeholder="Type your question here...">
  <input type="file" id="imageInput" accept="image/*" capture="environment">
  <button onclick="askAI()">Get Answer</button>
  <div class="image-preview" id="preview"></div>
  <div class="response" id="response">AI answer will appear here...</div>
</div>

<script>
// Preview uploaded image
const preview = document.getElementById("preview");
document.getElementById("imageInput").addEventListener("change", (e) => {
  const file = e.target.files[0];
  if(file){
    const img = document.createElement("img");
    img.src = URL.createObjectURL(file);
    preview.innerHTML = "";
    preview.appendChild(img);
  }
});

// Ask AI via backend server
async function askAI() {
  const question = document.getElementById("question").value.trim();
  const file = document.getElementById("imageInput").files[0];
  const responseBox = document.getElementById("response");

  if(!question && !file){ responseBox.textContent = "Please type a question or upload an image!"; return; }

  responseBox.textContent = "Thinking...";

  const form = new FormData();
  form.append("question", question);
  if(file) form.append("image", file);

  try{
    const res = await fetch("https://ai-student-helper.onrailway.app/ask", { method:"POST", body: form });
    const data = await res.json();
    responseBox.textContent = data.answer || "No answer received";
  } catch(err){
    console.error(err);
    responseBox.textContent = "Error connecting to AI server";
  }
}
</script>
</body>
</html>
